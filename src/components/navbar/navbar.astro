---
import Button from "@components/ui/button.astro";
import Link from "@components/ui/link.astro";
import { localizePath } from "astro-i18next";
import { Icon } from "astro-icon/components";
import { t } from "i18next";

export const menuitems = [
    {
        title: "Inicio",
        path:"/",
    },
        /* children: [
            { title: "Subitem 1", path: "#" },
            { title: "Subitem 2", path: "#" },
            { title: "Subitem 3", path: "#" },
        ],
    },**/
    {
        title: "Quienes somos",
        path: "/quienessomos",
    },
    {
        title: "Servicios",
        path: "servicios/",
    },
    {
        title: "Blog",
        path: "/blog",
    },
    {
        title: "Contactanos",
        path: "contact",
    },
];
---

<div
    x-data="{open: window.innerWidth < 768 ? false : true} "
    class="bg-[#003366] flex h-50 flex-col w-full px-4 md:items-center md:justify-between md:flex-row md:px-6 lg:px-8 z-10 md:pt-2 relative w-full">
    <div class="p-4 flex flex-row items-center justify-between w-full">
        <a
            href={localizePath("/")}
            class="flex gap-3 items-center text-lg font-semibold tracking-widest text-white uppercase rounded-lg dark:text-white focus:outline-none focus:shadow-outline">
            <img src="/images/Logo-amarillo.png" alt="Logo" class="h-15 w-auto">
        </a>
        <button class="md:hidden text-blue-500 w-10 h-10 relative focus:outline-none" @click="open = !open">
            <span class="sr-only">Open main menu</span>
            <div class="block w-5 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2">
                <span
                    aria-hidden="true"
                    class="block absolute h-0.5 w-5 bg-current transform transition duration-200 ease-in-out"
                    :class="{'rotate-45': open,' -translate-y-1.5': !open }">
                </span>
                <span
                    aria-hidden="true"
                    class="block absolute h-0.5 w-5 bg-current transform transition duration-200 ease-in-out"
                    :class="{'opacity-0': open } ">
                </span>
                <span
                    aria-hidden="true"
                    class="block absolute h-0.5 w-5 bg-current transform transition duration-200 ease-in-out"
                    :class="{'-rotate-45': open, ' translate-y-1.5': !open}">
                </span>
            </div>
        </button>
    </div>

    <nav
    :class="{'flex': open, 'hidden': !open}"
    x-show="open"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 transform scale-90"
    x-transition:enter-end="opacity-100 transform scale-100"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100 transform scale-100"
    x-transition:leave-end="opacity-0 transform scale-90"
    class="md:mt-0 lg:pl-8 md:items-center flex-grow pb-4 md:pb-0 flex-col gap-2 transition-all ease-out md:transition-none md:justify-center md:flex-row hidden w-full">
    <div class="flex flex-col flex-grow text-center gap-2 md:justify-center md:items-center md:flex md:flex-row w-full">
        {
            menuitems.map((item) =>
                item.children && item.children.length ? (
                    <!-- ... (dropdown code remains the same) -->
                ) : (
                    <Link
                        href={localizePath(item.path)}
                        style="hover"
                        size="sm"
                        x-data="{ isActive: false }"
                        x-init={`() => {
                            const path = $el.getAttribute('data-path');
                            const checkPath = () => {
                                isActive = window.location.pathname === path ||
                                            window.location.pathname === path + '/' ||
                                            window.location.pathname === '/it' + path ||
                                            window.location.pathname === '/it' + path + '/';
                            };
                            document.removeEventListener('astro:page-load', checkPath);
                            document.addEventListener('astro:page-load', checkPath);
                        }`}
                        x-bind:class="{ 'text-black font-bold': isActive }"
                        class="text-white hover:text-black transition-colors duration-200"
                        data-path={item.path}>
                        {t(item.title)}
                    </Link>
                ),
            )
        }
    </div>
    <div class="mt-4 md:mt-0 flex flex-col md:flex-row gap-4">
        <Link 
            href="/contact" 
            class="md:px-3 md:py-2 leading-6 text-white hover:text-yellow-400 transition-colors duration-200">
            {t("Mas informacion")}
        </Link>
    </div>
</nav>

</div>